import { NextResponse } from 'next/server'; import { Store } from '../../../../shared/store'; export async function GET(){ const decorate=(q:any)=>{ const j=Store.getJob(q.jobId); return {...q, jobTitle:j?.title, company:j?.company}; }; const current=Store.sessions.find(s=>['connecting','connected'].includes(s.status)); const currentDecorated=current?{...current, jobTitle:Store.getJob(current.jobId)?.title, company:Store.getJob(current.jobId)?.company}:null; return NextResponse.json({ queue: Store.queue.map(decorate), current: currentDecorated }); }
